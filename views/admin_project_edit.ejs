<%- include('partials/layout_top', { title }) %>
<%- include('partials/admin_nav', { admin }) %>

<div class="animate-in">
  <div class="card-header">
    <h1 class="h1" style="margin:0;">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:-3px;margin-right:6px"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
      <%= project ? 'Proje Duzenle' : 'Proje Ekle' %>
    </h1>
    <a class="btn btn-sm" href="/admin/projects">
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
      Geri
    </a>
  </div>

  <% if (error) { %>
    <div class="alert alert-danger animate-in" style="margin-bottom:20px;">
      <span class="alert-icon">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
      </span>
      <div class="alert-body"><%= error %></div>
    </div>
  <% } %>

  <form class="form" method="post" action="/admin/projects/save">
    <% if (project && project.id) { %>
      <input type="hidden" name="id" value="<%= project.id %>" />
    <% } %>

    <div class="card animate-in animate-delay-1">
      <div class="h2">Proje Bilgileri</div>
      <div class="grid" style="margin-bottom:16px;">
        <div class="form-group">
          <div class="label">Proje Adi</div>
          <input class="input" name="name" placeholder="Ornek: Istanbul Sube" value="<%= values.name %>" required />
        </div>
        <div class="form-group">
          <div class="label">Slug (URL) <span class="label-hint">sadece harf, rakam, tire</span></div>
          <input class="input" name="slug" placeholder="ornek: istanbul-sube" value="<%= values.slug %>" required />
          <span class="small">Form adresi: /p/slug-buraya-gelir</span>
        </div>
      </div>
      <label class="checkbox-inline">
        <input type="checkbox" name="is_active" <%= values.is_active?'checked':'' %> />
        <span>Proje Aktif</span>
      </label>
    </div>

    <div class="card animate-in animate-delay-2" style="margin-top:16px;">
      <div class="h2">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:-2px;margin-right:4px"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
        ISG Metinleri
      </div>
      <div class="grid" style="margin-bottom:16px;">
        <div class="form-group">
          <div class="label">Ziyaretci ISG Metni</div>
          <textarea class="textarea" name="isg_text_ziyaretci" placeholder="Ziyaretciler icin ISG kurallarini yaziniz..." required><%= values.isg_text_ziyaretci %></textarea>
        </div>
        <div class="form-group">
          <div class="label">Tedarikci ISG Metni</div>
          <textarea class="textarea" name="isg_text_tedarikci" placeholder="Tedarikciler icin ISG kurallarini yaziniz..." required><%= values.isg_text_tedarikci %></textarea>
        </div>
      </div>
      <div class="form-group">
        <div class="label">Taseron ISG Metni</div>
        <textarea class="textarea" name="isg_text_taseron" placeholder="Taseronlar icin ISG kurallarini yaziniz..." required><%= values.isg_text_taseron %></textarea>
      </div>
    </div>

    <div class="card animate-in animate-delay-3" style="margin-top:16px;">
      <div class="h2">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:-2px;margin-right:4px"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        Yetkili Listesi & Mail
      </div>
      <div class="grid">
        <div class="form-group">
          <div class="label">Yetkili / Musteri Listesi <span class="label-hint">(her satira bir kisi)</span></div>
          <textarea class="textarea" name="authorized_people_lines" placeholder="Ahmet Yilmaz&#10;Mehmet Demir&#10;Ayse Kaya"><%= values.authorized_people_lines %></textarea>
          <span class="small">Formda acilir liste olarak gosterilir</span>
        </div>
        <div class="form-group">
          <div class="label">Mail Alicilari <span class="label-hint">(her satira bir e-posta)</span></div>
          <textarea class="textarea" name="email_recipients_lines" placeholder="admin@firma.com&#10;guvenlik@firma.com"><%= values.email_recipients_lines %></textarea>
          <span class="small">E-posta gonderimi simdilik kapali; altyapi icin tutulur</span>
        </div>
      </div>
    </div>

    <div style="margin-top:20px;">
      <button class="btn primary btn-block" type="submit">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
        Projeyi Kaydet
      </button>
    </div>
  </form>
</div>

<%- include('partials/layout_bottom') %>
